import Head from 'next/head'
import Link from 'next/link'
import React, { useContext, useEffect, useState } from 'react'
import { Store } from '../utils/Store'
import { BsCart2 } from "react-icons/bs";

export default function Layout({title, children}) {
    
    const {state, dispatch} = useContext(Store)
    const {cart} = state
    const [cartItemsCount, setCartItemsCart] = useState(0)

    useEffect(() => {
        setCartItemsCart(cart.cartItems.reduce((a, c)=>a + c.quantity, 0))
    }, [cart.cartItems])
 
    return (
    <div>
        <Head>
        <title>{title ? title + " - shopping" : "shopping"}</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <nav className="navbar navbar-expand-lg navbar-dark bg-dark">
         <div className="container">
                    <Link href="/" className="navbar-brand" >
                        Shopping
                    </Link>
                <div id="navbarNav">
                    <ul className="navbar-nav ms-auto ">
                        <li className="nav-item">    
                            <Link href="/Cart" className="nav-link active" style={{display:'flex', alignItems: 'center'}}>
                                <BsCart2/> <span className='text-white rounded p-1' >{cartItemsCount}</span>
                            </Link>
                        </li>
                    </ul>
                </div>
        </div>
      </nav>
      <main>
        {children}
      </main>





    </div>
  )
}
